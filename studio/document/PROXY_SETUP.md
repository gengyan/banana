# 代理配置说明

## 问题说明

Google Generative AI API 使用 gRPC 协议进行通信，而 gRPC 对代理的支持有限。
标准的 HTTP 代理环境变量（http_proxy, https_proxy）对 gRPC 无效。

## 解决方案

### 方案1：使用系统级代理（推荐）

由于 gRPC 可能无法通过环境变量配置代理，但可以使用系统级代理设置。

**macOS 系统代理设置已配置**：127.0.0.1:29290

但 gRPC 可能仍然无法使用系统代理。如果遇到问题，请尝试以下方案。

### 方案2：使用代理转换工具

可以使用代理工具将 HTTP 代理转换为 gRPC 支持的格式：

1. 使用 `gost` 工具：
```bash
# 安装 gost
brew install gost

# 启动 gost，将本地 SOCKS5 代理转换为 HTTP CONNECT 代理
gost -L=http://:8080 -F=socks5://127.0.0.1:29290
```

然后设置环境变量指向新的代理地址。

### 方案3：检查代理工具

您的代理工具（端口 29290）可能需要特殊配置才能支持 gRPC。

**建议**：
1. 确认您的代理工具是否支持 gRPC/HTTP2
2. 查看代理工具的文档，了解如何配置 gRPC 支持
3. 或者联系代理服务提供商

### 当前配置

当前代码已配置尝试使用代理（通过环境变量），但 gRPC 可能无法使用。

可以通过设置环境变量 `USE_PROXY=false` 来禁用代理配置。
